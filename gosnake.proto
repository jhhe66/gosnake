syntax = "proto3";
package comm;

option go_package = "gosnake-server/comm";

enum Mode {
	None = 0;
	P1P = 1;
	P2P = 2;
	P3P = 3;
}

enum KeyCode {
	NO_KEY = 0;
	LEFT = -1;
	UP = -20;
	RIGHT = 1;
	DOWN = 20;
}

message Up {
	message UpJoin {
		Mode mode = 1;
	}

	message UpOp {
		KeyCode keycode = 1;
	}

	oneof m {
		UpJoin join = 1;
		UpOp op = 2;
	}
}

message Down {
	message Snake {
		int32 cid = 1;
		repeated int32 body = 2;
	}

	message DownKickOff {
		int32 cid = 1;
		repeated int32 foods = 2;
		repeated Snake snakes = 3;
	}

	message DownFrame {
		repeated int32 foods = 1;
		repeated int32 keycodes = 2;
	}

	oneof m {
		DownKickOff kickoff = 1;
		DownFrame frame = 2;
	}
}
